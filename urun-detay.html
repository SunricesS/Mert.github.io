<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>ÃœrÃ¼n DetayÄ±</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Ãœst logo ve menÃ¼ -->
  <header>
    <div class="logo">Ã–ksÃ¼zer Design</div>
    <nav>
      <a href="index.html">Ana Sayfa</a>
      <a href="index.html#urunler">Katalog</a>
    </nav>
  </header>

  <!-- ÃœrÃ¼n detay alanÄ± -->
  <div class="urun-detay">
    <div class="urun-slayt" id="urunSlayt">
      <!-- GÃ¶rseller JS ile gelecek -->
      <button class="slayt-btn prev">&#10094;</button>
      <button class="slayt-btn next">&#10095;</button>
    </div>

    <div class="urun-bilgi">
      <h2 id="urunBaslik"></h2>
      <div class="aciklama" id="urunAciklama"></div>
      
      <div id="renkSecenekleri" class="renk-secenekleri"></div>

      <div class="fiyat" id="urunFiyat"></div>

      <div class="iletisim">
        <strong>Ä°letiÅŸim:</strong><br>
        ğŸ“ 0(555) 123 45 67<br>
        ğŸ’¬ WhatsApp: 0(555) 765 43 21<br>
        ğŸ  MaÄŸaza Adresi: Ankara / Siteler<br>
        âœ‰ï¸ info@oksuzerdesign.com
      </div>

      <a href="index.html#urunler" class="geri">â† ÃœrÃ¼n KataloÄŸuna DÃ¶n</a>
    </div>
  </div>

  <!-- Veriler bu dosyadan geliyor -->
  <script src="urunler.js"></script>

  <script>
    const params = new URLSearchParams(window.location.search);
    const urunId = params.get("id");
    const urun = urunler[urunId];

    if (!urun) {
      document.body.innerHTML = "<h2 style='text-align:center;margin-top:50px;'>ÃœrÃ¼n bulunamadÄ±.</h2>";
      throw new Error("ÃœrÃ¼n bulunamadÄ±.");
    }

    // Sayfa bilgilerini doldur
    document.getElementById("urunBaslik").textContent = urun.baslik;
    document.getElementById("urunAciklama").textContent = urun.aciklama;
    document.getElementById("urunFiyat").textContent = urun.fiyat;

    // Renk SeÃ§enekleri ve Galeri MantÄ±ÄŸÄ±
    const renkContainer = document.getElementById("renkSecenekleri");
    const slaytContainer = document.getElementById("urunSlayt");
    let currentImages = []; // Åu an ekranda dÃ¶nen resimler
    let index = 0; // Slayt sÄ±rasÄ±

    // Galeri OluÅŸturma Fonksiyonu
    function galeriOlustur(resimDizisi) {
        // Mevcut resimleri temizle (butonlar hariÃ§)
        const mevcutResimler = slaytContainer.querySelectorAll("img");
        mevcutResimler.forEach(img => img.remove());

        currentImages = resimDizisi;
        index = 0; // BaÅŸa dÃ¶n

        // Yeni resimleri ekle
        currentImages.forEach((src, i) => {
            const img = document.createElement("img");
            img.src = src;
            if (i === 0) img.classList.add("active");
            // Butonlardan Ã¶nceye (insertBefore) ekle
            slaytContainer.insertBefore(img, slaytContainer.querySelector(".prev"));
        });
    }

    // Renk ButonlarÄ±nÄ± OluÅŸturma MantÄ±ÄŸÄ±
    let aktifRenkResimleri = [];

    // DURUM 1: ÃœrÃ¼nÃ¼n 'renkler' objesi varsa (Yeni Sistem)
    if (urun.renkler) {
        const renkIsimleri = Object.keys(urun.renkler);
        
        // Renk baÅŸlÄ±ÄŸÄ± ekle (Opsiyonel)
        if(renkIsimleri.length > 0) {
             const baslikSpan = document.createElement("span");
             baslikSpan.className = "renk-baslik";
             baslikSpan.textContent = "Renk SeÃ§enekleri:";
             renkContainer.appendChild(baslikSpan);
        }

        renkIsimleri.forEach((renkAdi, i) => {
            const btn = document.createElement("button");
            btn.className = "renk-btn";
            btn.textContent = renkAdi;
            
            // Ä°lk renk butonu seÃ§ili gelsin
            if (i === 0) {
                btn.classList.add("active");
                aktifRenkResimleri = urun.renkler[renkAdi];
            }

            // Butona tÄ±klandÄ±ÄŸÄ±nda
            btn.addEventListener("click", () => {
                // DiÄŸer butonlardan active sÄ±nÄ±fÄ±nÄ± al, buna ver
                document.querySelectorAll(".renk-btn").forEach(b => b.classList.remove("active"));
                btn.classList.add("active");

                // Galeriyi gÃ¼ncelle
                galeriOlustur(urun.renkler[renkAdi]);
            });

            renkContainer.appendChild(btn);
        });
    } 
    // DURUM 2: Eski sistem (Sadece 'resimler' dizisi varsa)
    else if (urun.resimler) {
        aktifRenkResimleri = urun.resimler;
        // EÄŸer buton istiyorsan buraya da tek bir "Standart" butonu ekleyebilirsin
        // Åimdilik boÅŸ bÄ±rakÄ±yorum, otomatik yÃ¼kleyecek.
    }

    // Sayfa ilk aÃ§Ä±ldÄ±ÄŸÄ±nda galeriyi yÃ¼kle
    galeriOlustur(aktifRenkResimleri);

    // --- Slayt OklarÄ± MantÄ±ÄŸÄ± ---
    const nextBtn = document.querySelector(".next");
    const prevBtn = document.querySelector(".prev");

    function showSlide(i) {
      const slides = slaytContainer.querySelectorAll("img");
      if(slides.length === 0) return;
      slides.forEach((img, idx) => img.classList.toggle("active", idx === i));
    }

    nextBtn.addEventListener("click", () => {
      const slides = slaytContainer.querySelectorAll("img");
      index = (index + 1) % slides.length;
      showSlide(index);
    });

    prevBtn.addEventListener("click", () => {
      const slides = slaytContainer.querySelectorAll("img");
      index = (index - 1 + slides.length) % slides.length;
      showSlide(index);
    });
  </script>
</body>
</html>
